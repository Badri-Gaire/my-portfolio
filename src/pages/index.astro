---
import BaseLayout from "../layouts/BaseLayout.astro";
import Hero from "../components/features/home/Hero.astro";
import Skills from "../components/features/home/Skills.astro";
import About from "../components/features/home/About.astro";
import Experience from "../components/features/home/Experience.astro";
import Projects from "../components/features/home/Projects.astro";
import BlogCard from "../components/features/home/BlogCard.astro";
---

<BaseLayout>
  <!-- Images and title -->
  <Hero />
  <!-- All skills sections -->
  <Skills />
  <!-- Experiences sections -->
  <Experience />
  <!-- ALl my projects -->
  <Projects />
  <!-- All my blog -->
  <BlogCard home="true" />
  <!-- About me -->
  <About />
</BaseLayout>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";
  import { ScrollToPlugin } from "gsap/ScrollToPlugin";

  gsap.registerPlugin(ScrollTrigger, ScrollToPlugin);

  // Scroll animations
  const animateElements = document.querySelectorAll(".animate-on-scroll");

  animateElements.forEach((element) => {
    gsap.to(element, {
      scrollTrigger: {
        trigger: element,
        start: "top 85%",
        toggleActions: "play none none reverse",
      },
      y: 0,
      opacity: 1,
      duration: 0.8,
      ease: "power3.out",
    });
  });

  // Smooth scrolling for anchor links
  const anchors = document.querySelectorAll('a[href^="#"]');
  anchors.forEach((anchor) => {
    anchor.addEventListener("click", (e) => {
      e.preventDefault();
      const currentAnchor = e.currentTarget as HTMLAnchorElement;
      const targetId = currentAnchor.getAttribute("href");
      if (!targetId || targetId === "#") return;

      const targetElement = document.querySelector(targetId);
      if (targetElement) {
        gsap.to(window, {
          duration: 1,
          scrollTo: { y: targetElement, offsetY: 80 },
          ease: "power2.inOut",
        });
      }
    });
  });
</script>
