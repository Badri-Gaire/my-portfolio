---
import { Sun, Moon } from "lucide-react";
---

<button
  <button
  class="theme-toggle relative inline-flex h-9 w-16 items-center rounded-full bg-gray-200 dark:bg-gray-700 transition-colors duration-300 focus:outline-none ring-2 ring-transparent focus:ring-primary"
  aria-label="Toggle theme"
>
  <span class="sr-only">Toggle theme</span>
  <span
    class="pointer-events-none absolute left-1 top-1 flex h-7 w-7 items-center justify-center rounded-full bg-white shadow-lg ring-0 transition-transform duration-300 ease-in-out dark:translate-x-7"
  >
    <span class="dark:hidden flex items-center justify-center text-yellow-500">
      <Sun className="size-4" client:load />
    </span>
    <span class="hidden dark:flex items-center justify-center text-gray-900">
      <Moon className="size-4" client:load />
    </span>
  </span>
</button>

<script>
  const handleToggleClick = () => {
    const element = document.documentElement;
    element.classList.toggle("dark");

    const isDark = element.classList.contains("dark");
    localStorage.setItem("theme", isDark ? "dark" : "light");
  };

  const themeToggles = document.querySelectorAll(".theme-toggle");

  themeToggles.forEach((toggle) => {
    toggle.addEventListener("click", handleToggleClick);
  });
</script>
