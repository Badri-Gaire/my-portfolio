---
import { siteConfig } from "../../utils/siteConfig";

interface Props {
  title: string;
  description: string;
  image?: string;
  type?: "website" | "article";
  publishDate?: Date;
}

const {
  title,
  description,
  image = "/images/og-image.webp",
  type = "website",
  publishDate,
} = Astro.props;

const siteUrl = siteConfig.site;
const socialImageURL = new URL(image, siteUrl).href;
/**Automatically shows canonical url in others pages */
const canonicalURL = new URL(Astro.url.pathname, siteUrl).href;

const jsonLD: { "@context": string; "@graph": any[] } = {
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebSite",
      "@id": `${siteUrl}/#website`,
      url: siteUrl,
      name: siteConfig.title,
      description: siteConfig.description,
      publisher: {
        "@id": `${siteUrl}/#person`,
      },
    },
    {
      "@type": ["Person", "ProfessionalService"],
      "@id": `${siteUrl}/#person`,
      name: siteConfig.author,
      url: siteUrl,
      jobTitle: "Frontend Developer",
      address: {
        "@type": "PostalAddress",
        addressLocality: "Bhairahawa",
        addressRegion: "Rupandehi",
        addressCountry: "NP",
      },
      geo: {
        "@type": "GeoCoordinates",
        latitude: "27.5084",
        longitude: "83.4601",
      },
      areaServed: [
        {
          "@type": "City",
          name: "Bhairahawa",
        },
        {
          "@type": "City",
          name: "Butwal",
        },
        {
          "@type": "City",
          name: "Siddharthanagar",
        },
      ],
      hasOfferCatalog: {
        "@type": "OfferCatalog",
        name: "Web Development Services",
        itemListElement: [
          {
            "@type": "Offer",
            itemOffered: {
              "@type": "Service",
              name: "Website Development",
              description:
                "Custom website development using modern technologies",
            },
          },
          {
            "@type": "Offer",
            itemOffered: {
              "@type": "Service",
              name: "Responsive Web Design",
              description: "Mobile-friendly and responsive website design",
            },
          },
          {
            "@type": "Offer",
            itemOffered: {
              "@type": "Service",
              name: "SEO Optimization",
              description: "Search engine optimization for better visibility",
            },
          },
        ],
      },
      sameAs: siteConfig.socialLinks,
    },
  ],
};

if (type === "article" && publishDate) {
  jsonLD["@graph"].push({
    "@type": "BlogPosting",
    headline: title,
    description: description,
    datePublished: publishDate.toISOString(),
    author: {
      "@id": `${siteUrl}/#person`,
    },
    url: canonicalURL,
    image: socialImageURL,
    isPartOf: {
      "@id": `${siteUrl}/#website`,
    },
    mainEntityOfPage: {
      "@type": "WebPage",
      "@id": canonicalURL,
    },
  });
}
---

<title>{title}</title>
<meta name="description" content={description} />
<meta
  name="keywords"
  content="Badri Gaire , Frontend Developer , React ,Nextjs, Astro, Typescript ,Tailwind Css  , Seo Optimization , High performance website development , Responsive Design , Bhairahawa , Butwal , Nepal"
/>
<meta name="author" content={siteConfig.author} />
<!-- canonical url -->
<link rel="canonical" href={canonicalURL} />

<meta charset="utf-8" />
<meta name="referrer" content="strict-origin-when-cross-origin" />
<link rel="icon" type="image/svg+xml" href="/favicon.ico" />
<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png" />
<link rel="shortcut icon" href="/favicon.ico" />
<!-- For PWA -->
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<meta name="apple-mobile-web-app-title" content="Badri Gaire" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="mobile-web-app-capable" content="yes" />
<meta
  name="apple-mobile-web-app-status-bar-style"
  content="black-translucent"
/>
<link rel="manifest" href="/site.webmanifest" />
<!-- For Responsive -->
<meta name="viewport" content="width=device-width" />
<!-- Astro version -->
<meta name="generator" content={Astro.generator} />
<!-- Open Graph / Facebook / Instagram / WhatsApp -->
<meta property="og:type" content={type} />
<meta property="og:url" content={canonicalURL} />
<meta property="og:title" content={title} />
<meta property="og:description" content={description} />
<meta property="og:image" content={socialImageURL} />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:image:alt" content={title} />
<meta property="og:site_name" content={siteConfig.title} />
<meta property="og:locale" content={siteConfig.lang} />
<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image" />
<meta property="twitter:url" content={canonicalURL} />
<meta property="twitter:title" content={title} />
<meta property="twitter:description" content={description} />
<meta property="twitter:image" content={socialImageURL} />
<meta name="twitter:creator" content={`@${siteConfig.author}`} />
<!-- for google-bot -->
<meta
  name="robots"
  content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"
/>
<meta
  name="googlebot"
  content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"
/>
<!-- Geo targeting for local SEO -->
<meta name="geo.region" content="NP-P3" />
<meta name="geo.placename" content="Bhairahawa" />
<meta name="geo.position" content="27.5084;83.4601" />
<meta name="ICBM" content="27.5084, 83.4601" />
<!-- Json Ld for more details -->
<script type="application/ld+json" set:html={JSON.stringify(jsonLD)} />
